<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1083px" preserveAspectRatio="none" style="width:2086px;height:1083px;background:#FFFFFF;" version="1.1" viewBox="0 0 2086 1083" width="2086px" zoomAndPan="magnify"><defs><filter height="300%" id="fpg20nj2c66zi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="945" cy="20" fill="#000000" filter="url(#fpg20nj2c66zi)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="116" x="887" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="93" x="897" y="72.457">Create a variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="90" x="900" y="87.5508">for organization :</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="65" x="914" y="102.6445">"org_group"</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="80.375" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="134" x="878" y="135.2813"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="891" y="157.7383">Create dictionary of</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="108" x="891" y="172.832">pandas dataframes</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="83" x="903.5" y="187.9258">from user data:</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="32" x="930.5" y="203.0195">"data"</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="193" x="848.5" y="235.6563"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="146" x="870.5" y="258.1133">Create a list of dictionaries</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="93" x="898.5" y="273.207">from the schema</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="170" x="861.5" y="288.3008">specifying sharing rules to filter</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="177" x="856.5" y="320.9375"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="157" x="866.5" y="343.3945">Filter data based on schema</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="167" x="861.5" y="376.0313"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="147" x="871.5" y="398.4883">Iterate through the schema</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="945,431.125,945,431.125,957,443.125,945,455.125,945,455.125,933,443.125,945,431.125" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="139" x="794" y="440.708">schema['direction'] = 'column'</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="160" x="957" y="440.708">) then (schema['direction'] = 'row'</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="35.0938" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="154" x="335.25" y="465.125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="134" x="345.25" y="487.582">Filter columns/ variables</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="150" x="337.25" y="535.2188"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="127" x="347.25" y="557.6758">Loop over each table in</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="370.25" y="572.7695">`data` dictionary</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="70,620.5,70,620.5,82,632.5,70,644.5,70,644.5,58,632.5,70,620.5" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="176" x="74" y="655.9189">"shareWith" not contains 'org_group'</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="118" x="11" y="678.3359"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="95" x="21" y="700.793">Keep the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="64" x="39.5" y="715.8867">inside table</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="327.5,620.5,327.5,620.5,339.5,632.5,327.5,644.5,327.5,644.5,315.5,632.5,327.5,620.5" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="321" x="331.5" y="655.9189">"sharedWith" contains 'org_group' and schema['filterValue'] = 'ALL'</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="445" x="339.5" y="630.083">) then ("sharedWith" contains 'org_group' and schema['filterValue'] present in table['variable']</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="135" x="260" y="678.3359"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="112" x="270" y="700.793">Remove the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="55" x="301.5" y="715.8867">from table</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="151" x="668.5" y="674.418"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="128" x="678.5" y="696.875">Remove all the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="55" x="718" y="711.9688">from table</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="140" x="1401.75" y="465.125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="117" x="1411.75" y="487.582">Filter rows in the data</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="114" x="1416.25" y="502.6758">for each organization</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="50.1875" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="150" x="1396.75" y="550.3125"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="127" x="1406.75" y="572.7695">Loop over each table in</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="1429.75" y="587.8633">`data` dictionary</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="911.5,635.5938,911.5,635.5938,923.5,647.5938,911.5,659.5938,911.5,659.5938,899.5,647.5938,911.5,635.5938" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="915.5" y="671.0127">"filterValue"= [a,b]</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="95.4688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="144" x="839.5" y="693.4297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="859.5" y="715.8867">Remove all values</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="871.5" y="730.9805">for the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="868" y="746.0742">within the range</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="866" y="761.168">between a and b</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="121" x="852.5" y="776.2617">including both a and b</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="1104.5,635.5938,1104.5,635.5938,1116.5,647.5938,1104.5,659.5938,1104.5,659.5938,1092.5,647.5938,1104.5,635.5938" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="1108.5" y="671.0127">"filterValue" = (a,b]</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="95.4688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="172" x="1018.5" y="693.4297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="1052.5" y="715.8867">Remove all values</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="1064.5" y="730.9805">for the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="1061" y="746.0742">within the range</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="1059" y="761.168">between a and b</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="1031.5" y="776.2617">excluding a and including b</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="1295.5,635.5938,1295.5,635.5938,1307.5,647.5938,1295.5,659.5938,1295.5,659.5938,1283.5,647.5938,1295.5,635.5938" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="91" x="1299.5" y="671.0127">"filterValue" = [a,b)</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="95.4688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="172" x="1209.5" y="693.4297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="1243.5" y="715.8867">Remove all values</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="1255.5" y="730.9805">for the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="1252" y="746.0742">within the range</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="1250" y="761.168">between a and b</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="149" x="1222.5" y="776.2617">including a and excluding b</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="1479.5,635.5938,1479.5,635.5938,1491.5,647.5938,1479.5,659.5938,1479.5,659.5938,1467.5,647.5938,1479.5,635.5938" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="92" x="1483.5" y="671.0127">"filterValue" = (a,b)</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="95.4688" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="146" x="1406.5" y="693.4297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="1427.5" y="715.8867">Remove all values</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="1439.5" y="730.9805">for the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="1436" y="746.0742">within the range</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="1434" y="761.168">between a and b</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="123" x="1419.5" y="776.2617">excluding both a and b</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="1647.5,635.5938,1647.5,635.5938,1659.5,647.5938,1647.5,659.5938,1647.5,659.5938,1635.5,647.5938,1647.5,635.5938" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84" x="1651.5" y="671.0127">"filterValue" = a;b</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="80.375" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="124" x="1585.5" y="693.4297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="1595.5" y="715.8867">Remove all values</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="1607.5" y="730.9805">for the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="79" x="1608" y="746.0742">where value of</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="1603.5" y="761.168">variable = a 'or' b</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="1807.5,635.5938,1807.5,635.5938,1819.5,647.5938,1807.5,659.5938,1807.5,659.5938,1795.5,647.5938,1807.5,635.5938" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="1811.5" y="671.0127">"filterValue" = a</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="80.375" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="124" x="1745.5" y="693.4297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="1755.5" y="715.8867">Remove all values</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="1767.5" y="730.9805">for the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="79" x="1768" y="746.0742">where value of</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="63" x="1777.5" y="761.168">variable = a</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="1968,635.5938,1968,635.5938,1980,647.5938,1968,659.5938,1968,659.5938,1956,647.5938,1968,635.5938" style="stroke:#A80036;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="1972" y="671.0127">"filterValue" !=a</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="80.375" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="143" x="1896.5" y="693.4297"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="101" x="1916" y="715.8867">Remove all values</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="1928" y="730.9805">for the variable</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="79" x="1928.5" y="746.0742">where value of</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="120" x="1909.5" y="761.168">variable not equal to a</text><polygon fill="#FEFECE" filter="url(#fpg20nj2c66zi)" points="945,829.5234,957,841.5234,945,853.5234,933,841.5234,945,829.5234" style="stroke:#A80036;stroke-width:1.5;"/><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="190" x="850" y="873.5234"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="899" y="895.9805">Return dicionary</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="104" x="893" y="911.0742">with tables as keys</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="167" x="863" y="926.168">and list of dictionaries as rows</text><rect fill="#FEFECE" filter="url(#fpg20nj2c66zi)" height="65.2813" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="185" x="852.5" y="958.8047"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="146" x="870.5" y="981.2617">Return a list of dictionaries</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="159" x="865.5" y="996.3555">specifying each row removed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="56" x="918.5" y="1011.4492">with ruleid</text><ellipse cx="945" cy="1055.0859" fill="#FFFFFF" filter="url(#fpg20nj2c66zi)" rx="11" ry="11" style="stroke:#000000;stroke-width:1.0;"/><ellipse cx="945" cy="1055.0859" fill="#000000" rx="6" ry="6" style="stroke:#7F7F7F;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="945" x2="945" y1="30" y2="50"/><polygon fill="#A80036" points="941,40,945,50,949,40,945,44" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="945" x2="945" y1="115.2813" y2="135.2813"/><polygon fill="#A80036" points="941,125.2813,945,135.2813,949,125.2813,945,129.2813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="945" x2="945" y1="215.6563" y2="235.6563"/><polygon fill="#A80036" points="941,225.6563,945,235.6563,949,225.6563,945,229.6563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="945" x2="945" y1="300.9375" y2="320.9375"/><polygon fill="#A80036" points="941,310.9375,945,320.9375,949,310.9375,945,314.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="945" x2="945" y1="356.0313" y2="376.0313"/><polygon fill="#A80036" points="941,366.0313,945,376.0313,949,366.0313,945,370.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="412.25" x2="412.25" y1="500.2188" y2="535.2188"/><polygon fill="#A80036" points="408.25,525.2188,412.25,535.2188,416.25,525.2188,412.25,529.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="70" x2="70" y1="644.5" y2="678.3359"/><polygon fill="#A80036" points="66,668.3359,70,678.3359,74,668.3359,70,672.3359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="70" x2="70" y1="728.5234" y2="803.5234"/><polygon fill="#A80036" points="66,793.5234,70,803.5234,74,793.5234,70,797.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="327.5" x2="327.5" y1="644.5" y2="678.3359"/><polygon fill="#A80036" points="323.5,668.3359,327.5,678.3359,331.5,668.3359,327.5,672.3359" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="327.5" x2="327.5" y1="728.5234" y2="803.5234"/><polygon fill="#A80036" points="323.5,793.5234,327.5,803.5234,331.5,793.5234,327.5,797.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="82" x2="315.5" y1="632.5" y2="632.5"/><polygon fill="#A80036" points="305.5,628.5,315.5,632.5,305.5,636.5,309.5,632.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="412.25" x2="412.25" y1="585.4063" y2="605.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="412.25" x2="70" y1="605.5" y2="605.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="70" x2="70" y1="605.5" y2="620.5"/><polygon fill="#A80036" points="66,610.5,70,620.5,74,610.5,70,614.5" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="339.5" x2="744" y1="632.5" y2="632.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="744" x2="744" y1="632.5" y2="674.418"/><polygon fill="#A80036" points="740,664.418,744,674.418,748,664.418,744,668.418" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="744" x2="744" y1="724.6055" y2="803.5234"/><polygon fill="#A80036" points="740,793.5234,744,803.5234,748,793.5234,744,797.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="70" x2="744" y1="803.5234" y2="803.5234"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1471.75" x2="1471.75" y1="515.3125" y2="550.3125"/><polygon fill="#A80036" points="1467.75,540.3125,1471.75,550.3125,1475.75,540.3125,1471.75,544.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="911.5" x2="911.5" y1="659.5938" y2="693.4297"/><polygon fill="#A80036" points="907.5,683.4297,911.5,693.4297,915.5,683.4297,911.5,687.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="911.5" x2="911.5" y1="788.8984" y2="823.5234"/><polygon fill="#A80036" points="907.5,813.5234,911.5,823.5234,915.5,813.5234,911.5,817.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1104.5" x2="1104.5" y1="659.5938" y2="693.4297"/><polygon fill="#A80036" points="1100.5,683.4297,1104.5,693.4297,1108.5,683.4297,1104.5,687.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1104.5" x2="1104.5" y1="788.8984" y2="823.5234"/><polygon fill="#A80036" points="1100.5,813.5234,1104.5,823.5234,1108.5,813.5234,1104.5,817.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1295.5" x2="1295.5" y1="659.5938" y2="693.4297"/><polygon fill="#A80036" points="1291.5,683.4297,1295.5,693.4297,1299.5,683.4297,1295.5,687.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1295.5" x2="1295.5" y1="788.8984" y2="823.5234"/><polygon fill="#A80036" points="1291.5,813.5234,1295.5,823.5234,1299.5,813.5234,1295.5,817.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1479.5" x2="1479.5" y1="659.5938" y2="693.4297"/><polygon fill="#A80036" points="1475.5,683.4297,1479.5,693.4297,1483.5,683.4297,1479.5,687.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1479.5" x2="1479.5" y1="788.8984" y2="823.5234"/><polygon fill="#A80036" points="1475.5,813.5234,1479.5,823.5234,1483.5,813.5234,1479.5,817.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1647.5" x2="1647.5" y1="659.5938" y2="693.4297"/><polygon fill="#A80036" points="1643.5,683.4297,1647.5,693.4297,1651.5,683.4297,1647.5,687.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1647.5" x2="1647.5" y1="773.8047" y2="823.5234"/><polygon fill="#A80036" points="1643.5,813.5234,1647.5,823.5234,1651.5,813.5234,1647.5,817.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1807.5" x2="1807.5" y1="659.5938" y2="693.4297"/><polygon fill="#A80036" points="1803.5,683.4297,1807.5,693.4297,1811.5,683.4297,1807.5,687.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1807.5" x2="1807.5" y1="773.8047" y2="823.5234"/><polygon fill="#A80036" points="1803.5,813.5234,1807.5,823.5234,1811.5,813.5234,1807.5,817.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1968" x2="1968" y1="659.5938" y2="693.4297"/><polygon fill="#A80036" points="1964,683.4297,1968,693.4297,1972,683.4297,1968,687.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1968" x2="1968" y1="773.8047" y2="823.5234"/><polygon fill="#A80036" points="1964,813.5234,1968,823.5234,1972,813.5234,1968,817.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="923.5" x2="1092.5" y1="647.5938" y2="647.5938"/><polygon fill="#A80036" points="1082.5,643.5938,1092.5,647.5938,1082.5,651.5938,1086.5,647.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1116.5" x2="1283.5" y1="647.5938" y2="647.5938"/><polygon fill="#A80036" points="1273.5,643.5938,1283.5,647.5938,1273.5,651.5938,1277.5,647.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1307.5" x2="1467.5" y1="647.5938" y2="647.5938"/><polygon fill="#A80036" points="1457.5,643.5938,1467.5,647.5938,1457.5,651.5938,1461.5,647.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1491.5" x2="1635.5" y1="647.5938" y2="647.5938"/><polygon fill="#A80036" points="1625.5,643.5938,1635.5,647.5938,1625.5,651.5938,1629.5,647.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1659.5" x2="1795.5" y1="647.5938" y2="647.5938"/><polygon fill="#A80036" points="1785.5,643.5938,1795.5,647.5938,1785.5,651.5938,1789.5,647.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1819.5" x2="1956" y1="647.5938" y2="647.5938"/><polygon fill="#A80036" points="1946,643.5938,1956,647.5938,1946,651.5938,1950,647.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1471.75" x2="1471.75" y1="600.5" y2="610.5938"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1471.75" x2="911.5" y1="610.5938" y2="610.5938"/><line style="stroke:#A80036;stroke-width:1.5;" x1="911.5" x2="911.5" y1="610.5938" y2="635.5938"/><polygon fill="#A80036" points="907.5,625.5938,911.5,635.5938,915.5,625.5938,911.5,629.5938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1980" x2="2060" y1="647.5938" y2="647.5938"/><line style="stroke:#A80036;stroke-width:1.5;" x1="2060" x2="2060" y1="647.5938" y2="823.5234"/><polygon fill="#A80036" points="2056,813.5234,2060,823.5234,2064,813.5234,2060,817.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="911.5" x2="2060" y1="823.5234" y2="823.5234"/><line style="stroke:#A80036;stroke-width:1.5;" x1="933" x2="412.25" y1="443.125" y2="443.125"/><line style="stroke:#A80036;stroke-width:1.5;" x1="412.25" x2="412.25" y1="443.125" y2="465.125"/><polygon fill="#A80036" points="408.25,455.125,412.25,465.125,416.25,455.125,412.25,459.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="957" x2="1471.75" y1="443.125" y2="443.125"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1471.75" x2="1471.75" y1="443.125" y2="465.125"/><polygon fill="#A80036" points="1467.75,455.125,1471.75,465.125,1475.75,455.125,1471.75,459.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="412.25" x2="412.25" y1="803.5234" y2="841.5234"/><line style="stroke:#A80036;stroke-width:1.5;" x1="412.25" x2="933" y1="841.5234" y2="841.5234"/><polygon fill="#A80036" points="923,837.5234,933,841.5234,923,845.5234,927,841.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1471.75" x2="1471.75" y1="823.5234" y2="841.5234"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1471.75" x2="957" y1="841.5234" y2="841.5234"/><polygon fill="#A80036" points="967,837.5234,957,841.5234,967,845.5234,963,841.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="945" x2="945" y1="411.125" y2="431.125"/><polygon fill="#A80036" points="941,421.125,945,431.125,949,421.125,945,425.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="945" x2="945" y1="853.5234" y2="873.5234"/><polygon fill="#A80036" points="941,863.5234,945,873.5234,949,863.5234,945,867.5234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="945" x2="945" y1="938.8047" y2="958.8047"/><polygon fill="#A80036" points="941,948.8047,945,958.8047,949,948.8047,945,952.8047" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.5;" x1="945" x2="945" y1="1024.0859" y2="1044.0859"/><polygon fill="#A80036" points="941,1034.0859,945,1044.0859,949,1034.0859,945,1038.0859" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[e1a1bb7013ca6f531b8e58283193037d]
@startuml activitydiagram
skinparam DefaultTextAlignment center
start

:Create a variable \n for organization : \n "org_group";

:Create dictionary of \n pandas dataframes \n from user data: \n "data";

:Create a list of dictionaries \n from the schema \n specifying sharing rules to filter;

:Filter data based on schema;

:Iterate through the schema;

    if () then (schema['direction'] = 'column')
        :Filter columns/ variables;
        :Loop over each table in \n `data` dictionary;
            if () then ("shareWith" not contains 'org_group')
                :Keep the variable \n inside table;
            elseif () then ("sharedWith" contains 'org_group' and schema['filterValue'] = 'ALL')
                :Remove the variable \n from table;
            else () then ("sharedWith" contains 'org_group' and schema['filterValue'] present in table['variable'])
                :Remove all the variable \n from table; 
            endif;

    else () then (schema['direction'] = 'row')
        :Filter rows in the data \n for each organization;
        :Loop over each table in \n `data` dictionary;
        if () then ("filterValue"= [a,b])
            :Remove all values \n for the variable \n within the range \n between a and b \n including both a and b;
        elseif () then ("filterValue" = (a,b])
            :Remove all values \n for the variable \n within the range \n between a and b \n excluding a and including b;
        elseif () then ("filterValue" = [a,b))
            :Remove all values \n for the variable \n within the range \n between a and b \n including a and excluding b;
        elseif () then ("filterValue" = (a,b))
            :Remove all values \n for the variable \n within the range \n between a and b \n excluding both a and b;
        elseif () then ("filterValue" = a;b)
            :Remove all values \n for the variable \n where value of \n variable = a 'or' b;
        elseif () then ("filterValue" = a)
            :Remove all values \n for the variable \n where value of \n variable = a;
        elseif () then ("filterValue" !=a)
            :Remove all values \n for the variable \n where value of \n variable not equal to a;
        endif
    endif;

:Return dicionary \n with tables as keys \n and list of dictionaries as rows; 

:Return a list of dictionaries \n specifying each row removed \n with ruleid;
stop
@enduml

PlantUML version 1.2021.7(Sun May 23 08:40:07 EDT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: CA
--></g></svg>